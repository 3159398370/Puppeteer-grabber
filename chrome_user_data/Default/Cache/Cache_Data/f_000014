(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin-group~dataview-group~main-group~workbench-group"],{2289:function(e,t,s){"use strict";s.d(t,"j",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"f",(function(){return l})),s.d(t,"l",(function(){return o})),s.d(t,"i",(function(){return n})),s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return m})),s.d(t,"h",(function(){return p})),s.d(t,"k",(function(){return h}));const a=["pcs","个","人","张","分钟","小时","框","条","对","组","页","首","次","台","单","句","套"],i=["语音标注","图片标注","文本标注","视频标注","普通信息标注","网页标注","问卷标注"],n=["图片标注","文本标注","语音标注","视频标注","网页标注","大模型标注","多模态标注","其他"],o=[{label:"生效中",value:1},{label:"已失效",value:0}],r=[{label:"内部标注项目",value:0},{label:"外部标注项目",value:1}],l=[{label:"待审批",value:10},{label:"进行中",value:20},{label:"关闭",value:30},{label:"审批不通过",value:40},{label:"确认供应商",value:50}],c=[{value:"数据类型",label:"数据类型",children:[{value:"图片",label:"图片"},{value:"视频",label:"视频"},{value:"文本",label:"文本"},{value:"网页",label:"网页"},{value:"音频",label:"音频"},{value:"其他",label:"其他"}]},{value:"年份",label:"年份",children:[...Array.from({length:5},(e,t)=>{const s=(new Date).getFullYear()-t;return{value:s,label:s}})]}],u={version:"qlabel_web_v1.2.0",information:["1、支持按题包领取标注。","2、标注组长可设置自动/手动添加批次交付。","3、质检任务调整为按批次质检。","4、验收侧质检移动至【标注工作台-质检任务】，可在任务里配置验收小组进行质检。"]},d=["csv","json","xml","yolo"],m=[{value:"local",title:"下载至本地"},{value:"aioss",title:"AIdata存储"}],p=[{label:0,name:"顺序领取"},{label:1,name:"随机领取"},{label:2,name:"倒序领取"}],h={piecework:"计件","piecework-audio":"计件-有效音频时长","piecework-unit":"计件-有效标注单元数","man-day":"包人日","man-month":"包人月","contract-hours-1":"包工时1","contract-hours-2":"包工时2"}},"25ff":function(e,t,s){"use strict";s("cc14")},"2c663":function(e,t,s){},"4f7f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("Header",{staticClass:"app-header",class:e.isGlobalGray&&"global-gray"},[a("div",{staticClass:"app-header__logo"},[a("img",{attrs:{src:s("9d64")}}),a("div",{staticClass:"title"},[e._v(e._s("demand"===e.mode?"需求中心":"标注工作台"))])]),a("div",{staticClass:"app-header_container"},[a("div",{staticClass:"app-header__nav"},[a("Menu",{key:e.mode,attrs:{mode:"horizontal",theme:"light","active-name":e.activeName}},[e.$store.state.userinfo.user&&e.isInCompany?[e._l(e.menuOptions[e.mode],(function(t){return[void 0===t.visible||t.visible?a("MenuItem",{directives:[{name:"permissions",rawName:"v-permissions",value:t.permissions,expression:"item.permissions"}],attrs:{name:t.name,to:{name:t.name}}},[a("span",[e._v(e._s(t.title))])]):e._e()]})),"demand"===e.mode&&e.companyinfo.is_publishable?a("MenuItem",{directives:[{name:"permissions",rawName:"v-permissions",value:{domain:"menu",action:"view",extra:{name:"dataview"}},expression:"{domain: 'menu', action: 'view', extra: {name: 'dataview'}}"}],staticClass:"dataview",attrs:{name:"dataview",to:"/dataview"}},[a("span",[e._v("数据统计")])]):e._e(),e.Config?a("div",{staticClass:"app-header__help",on:{click:e.goHelp}},[a("Icon",{staticClass:"mrs",attrs:{type:"ios-help-circle-outline",size:"18"}}),a("span",[e._v("使用帮助")])],1):e._e()]:e._e()],2)],1),a("div",{staticClass:"app-header__extra"},["demand"===e.mode?a("Button",{directives:[{name:"permissions",rawName:"v-permissions",value:{domain:"company",action:"view"},expression:"{domain: 'company', action: 'view'}"}],staticClass:"header-btn",attrs:{icon:"md-desktop",to:{name:"wb-my-task"}}},[e._v("前往标注工作台")]):e.companyinfo.is_publishable?a("Button",{directives:[{name:"permissions",rawName:"v-permissions",value:{domain:"menu",action:"view",extra:{name:"projects"}},expression:"{domain: 'menu', action: 'view', extra: {name: 'projects'}}"}],staticClass:"header-btn",attrs:{icon:"ios-list-box-outline",to:{name:"project"}}},[a("Tooltip",{attrs:{content:"当前有"+e.uploadingCount+"个文件正在上传中",theme:"light",disabled:!e.uploadingCount}},[a("span",[e._v("前往需求中心")]),e.uploadingCount?a("span",[e._v("（"+e._s(e.uploadingCount)+"）")]):e._e()])],1):e._e(),a("Poptip",{attrs:{trigger:"click",transfer:"",placement:"bottom-end"},on:{"on-popper-show":function(t){e.isChangeUser=!1}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"avatar"},[e.userinfo.user&&e.userinfo.user.oa_staffname?a("Avatar",{staticClass:"mrs",attrs:{src:"https://rhrc.woa.com/photo/150/"+e.userinfo.user.oa_staffname+".png"}}):a("Avatar",{staticClass:"mrs",attrs:{icon:"ios-person"}}),e.status?a("span",[e._v(e._s(e.nickName))]):a("span",[e._v("Runas："+e._s(e.nickName))]),a("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),a("div",{key:e.isChangeUser,staticClass:"operate",attrs:{slot:"content"},slot:"content"},[e.isChangeUser?a("div",{staticClass:"change-user"},[a("div",{staticClass:"header"},[e.userinfo.user&&e.userinfo.user.oa_staffname?a("Avatar",{staticClass:"mbs",attrs:{src:"https://rhrc.woa.com/photo/150/"+e.userinfo.user.oa_staffname+".png"}}):a("Avatar",{staticClass:"mbs",attrs:{icon:"ios-person"}}),a("div",{staticClass:"black mbs"},[e._v(e._s(e.nickName))]),a("div",{staticClass:"txt-muted mbs"},[e._v(e._s(e.companyinfo.company_name||"待加入公司"))])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"txt-muted mbm"},[e._v("切换账号")]),e.isNUll?a("div",{staticClass:"txt-muted mbm text-center"},[e._v("暂无其他账号")]):e._l(e.userinfo.users,(function(t){return t.user_id!==(e.userinfo.user?e.userinfo.user.user_id:"")?a("div",{staticClass:"user-list cursor",on:{click:function(s){return e.switchUser(t)}}},[t&&t.staffname?a("Avatar",{staticClass:"mrs",attrs:{src:"https://rhrc.woa.com/photo/150/"+t.staffname+".png"}}):a("Avatar",{staticClass:"mrs",attrs:{icon:"ios-person"}}),a("span",{staticClass:"txt-muted"},[e._v(e._s(t.nick_name||"昵称丢失，请联系管理员"))]),a("span",{staticClass:"txt-muted right"},[e._v(e._s(t.company_name||"待加入公司"))])],1):e._e()})),a("div",{staticClass:"cursor",staticStyle:{"margin-top":"30px"},on:{click:e.addUser}},[a("Icon",{staticClass:"mrm mlm",attrs:{type:"ios-add-circle-outline",size:"20"}}),a("span",[e._v("添加其他账号")])],1)],2),a("div",{staticClass:"footer mtm right"},[a("Button",{attrs:{size:"small"},on:{click:e.logout}},[e._v("退出登录")])],1)]):[e._l(e.personalOptions,(function(t){return[t.visible?[t.children?[e.visible?a("Poptip",{staticClass:"link",attrs:{disabled:t.disabled,placement:"left-start",trigger:"hover",transfer:""},scopedSlots:e._u([{key:"content",fn:function(){return e._l(t.children,(function(t){return a("div",{staticClass:"link",on:{click:function(e){return t.onClick(t.value)}}},[a("span",{staticClass:"mls mrs"},[e._v(e._s(t.label))])])}))},proxy:!0}],null,!0)},[a("div",{staticClass:"link",on:{click:t.onClick}},[t.icon?a("Icon",{class:t.disabled&&"txt-muted",attrs:{type:t.icon,size:"16"}}):e._e(),a("span",{staticClass:"mls mrs",class:t.disabled&&"txt-muted"},[e._v(e._s(t.label))]),t.disabled?e._e():a("Icon",{attrs:{type:"ios-arrow-forward",size:"16"}})],1)]):a("div",{staticClass:"link"},[t.icon?a("Icon",{attrs:{type:t.icon,size:"16"}}):e._e(),a("span",{staticClass:"mls mrs"},[e._v(e._s(t.label))]),a("Icon",{attrs:{type:"ios-arrow-forward",size:"16"}})],1)]:[t.divided?a("Divider",{staticStyle:{margin:"10px 0"}}):e._e(),t.permission?[a("auth-view",{attrs:{perm:t.permission}},[t.path?a("router-link",{staticClass:"link",attrs:{name:t.path,to:t.path}},[e._v(e._s(t.label))]):t.method?a("div",{staticClass:"link",on:{click:function(e){return t.method()}}},[e._v(e._s(t.label))]):a("div",{staticClass:"link"},[e._v(e._s(t.label))])],1)]:[t.path?a("router-link",{staticClass:"link",attrs:{name:t.path,to:t.path}},[e._v(e._s(t.label))]):t.method?a("div",{staticClass:"link",on:{click:function(e){return t.method()}}},[e._v(e._s(t.label))]):a("div",{staticClass:"link"},[e._v(e._s(t.label))])]]]:e._e()]}))]],2)])],1)])]),a("Layout",[a("router-view")],1)],1)},i=[],n=(s("8d0d"),s("28eb"),s("dde5")),o=s("9ce4"),r=s("db49"),l=s("2289"),c=s("bd1f"),u=s("82ad"),d=s("e3fa");const m=["2022-12-05 18:00:00","2022-12-07 09:00:00"];var p={components:{PublisherView:c["a"],SwitchUser:u["a"]},data(){const e=new Date,t=new Date(m[0]),s=new Date(m[1]);return{changeStatus:!0,currentTime:e,isGlobalGray:e>=t&&e<=s&&r["a"].INSIDE_DOMAIN,visible:!1,status:1,Config:r["a"],HelpFile:l["d"],isChangeUser:!1,menuOptions:{demand:[{name:"project",title:"项目管理"},{name:"datasets",title:"数据集管理"},{name:"templates",title:"标注模版"},{name:"salary",title:"运营管理",permissions:{domain:"business",action:"edit-billing"}}],workbench:[{name:"wb-tasks",title:"任务管理",permissions:{domain:"menu",action:"view",extra:{name:"wb-tasks"}}},{name:"wb-my-task",title:"我的任务"},{name:"wb-exam",title:"质效考核",visible:!r["a"].PRIVATIZATION},{name:"wb-salary",title:"考勤结算"}]}}},computed:{...Object(o["c"])({uploadQueue:"uploadQueue"}),mode(){return this.$route.path.includes("workbench")?"workbench":this.$route.path.includes("personal-center")||this.$route.path.startsWith("/company")?this.companyinfo.is_publishable?"demand":"workbench":"demand"},personalOptions(){const{userinfo:e}=this;return[{label:"个人中心",visible:!0,path:"/personal-center"},{label:"公司管理",visible:e.user&&e.user.company_id,permission:{domain:"company",action:"edit",extra:{company:e.user.company_id}},path:"/company"},{label:"后台管理",visible:e.user&&e.user.company_id,permission:{domain:"menu",action:"view",extra:{name:"admin"}},path:"/admin"},{label:"切换账号",visible:!0,method:()=>{this.isChangeUser=!0}},{label:this.changeStatus?"切换用户":"取消切换",visible:!0,method:()=>{this.changeStatus?this.changeUser():this.fetchCencelChange()},permission:this.changeStatus?{domain:"user",action:"run-as"}:void 0}]},activeName(){var e;return(null===(e=this.$route.meta.group)||void 0===e?void 0:e.split(".")[0])||""},nickName(){var e,t,s,a;return(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(s=t.userinfo)||void 0===s||null===(a=s.user)||void 0===a?void 0:a.nick_name)||""},userinfo(){return this.$store.state.userinfo},companyinfo(){return this.$store.state.companyinfo},isInCompany(){var e,t;return Boolean(null===(e=this.$store.state)||void 0===e||null===(t=e.companyinfo)||void 0===t?void 0:t.company_id)},uploadingCount(){const e=Object.keys(this.uploadQueue).reduce((e,t)=>{const{state:s}=this.uploadQueue[t];return"uploading"===s?e+1:e},0);return e},isNUll(){var e,t,s;return 0===(null===(e=this.userinfo.users)||void 0===e?void 0:e.length)||1===(null===(t=this.userinfo.users)||void 0===t?void 0:t.length)&&this.userinfo.users[0].user_id===(null===(s=this.userinfo.user)||void 0===s?void 0:s.user_id)}},watch:{visible(e){e&&(this.currentTime=new Date)}},async created(){1!==this.userinfo.user.user_status?(this.userinfo.user&&this.userinfo.user.user_id&&this.userinfo.real_user_id&&(this.status=JSON.stringify(this.userinfo.real_user_id)===JSON.stringify(this.userinfo.user.user_id)?1:0),window.addEventListener("beforeunload",this.leaveConfirm),this.noticeAction(),console.log(this.userinfo.real_user_id,this.userinfo),this.changeStatus=JSON.stringify(this.userinfo.real_user_id)===JSON.stringify(this.userinfo.user.user_id)):this.$Modal.error({title:"账号已冻结",content:"账号超过3个月未登录，账号已冻结，如需解冻，请联系公司负责人",closable:!1,maskClosable:!1,okText:"知道了",onOk:()=>{this.logout()}})},destroyed(){window.removeEventListener("beforeunload",this.leaveConfirm)},methods:{switchUser(e){n["d"].post("passport/switchAccount",{account_user_id:e.user_id}).then(e=>{e.data.result?window.location.href="personal-center/my-company?success=true":this.$Message.error("切换账号失败: "+e.data.error.message)}).catch(e=>{this.$Message.error("切换账号失败: "+e.message)})},addUser(){n["d"].post("passport/logoutAccount",{}).then(e=>{e.data.result?location.reload():this.$Message.error("添加账号失败: "+e.data.error.message)}).catch(e=>{this.$Message.error("添加账号失败: "+e.message)})},noticeAction(){const e=window.localStorage.getItem("version"),t=window.localStorage.getItem("is_first_time");e&&e===this.HelpFile.version&&"false"===t||(this.$Notice.config({top:60}),this.$Notice.warning({title:"版本提示",duration:30,render:e=>e("div",{style:{fontSize:"12px",lineHeight:"15px"}},this.HelpFile.information.map(t=>e("p",t)))}),window.localStorage.setItem("version",this.HelpFile.version),window.localStorage.setItem("is_first_time",!1))},goHelp(){window.open("workbench"===this.mode?this.Config.LABEL_HELP_LINK:this.Config.HELP_LINK)},logout(){Object(n["d"])({method:"get",url:"passport/logout"}).then(e=>{if(e.data.result){window.AuthCache={};const{origin:e}=window.location;console.log(e+"/v2/login"),window.location.replace(e+"/v2/login")}})},leaveConfirm(e){var t,s;if("sampsonliu"===(null===(t=this.userinfo)||void 0===t||null===(s=t.oa_user)||void 0===s?void 0:s.nick_name))return;const a="关闭提示";return e.preventDefault(),this.uploadingCount>0?e.returnValue=a:void 0},changeUser(){this.$FastModal.show(u["a"],{},{})}},asyncMethods:{fetchCencelChange(){const e={};return Object(d["x"])(e).then(e=>{e.data.result?(this.$Message.success("取消切换成功"),location.reload()):this.$Message.success("取消切换失败")}).catch(e=>{console.log(e),this.$Message.error("取消失败："+e)})}}},h=p,v=(s("25ff"),s("2be6")),f=Object(v["a"])(h,a,i,!1,null,"c5f77fea",null);t["default"]=f.exports},"82ad":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:"用户切换",width:"450",transfer:!1,"mask-closable":!1},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("Input",{staticClass:"switch_input",attrs:{placeholder:"请输入用户邮箱"},on:{"on-enter":e.fetchSwitch},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}}),s("div",{staticClass:"switch_button",attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary",loading:e.fetchSwitch.isPending},on:{click:e.fetchSwitch}},[e._v("切换")])],1)],1)},i=[],n=s("e3fa"),o={data(){return{visible:!0,userEmail:""}},asyncMethods:{fetchSwitch(){if(""===this.userEmail)return void this.$Message.success("请填写要切换的邮箱");const e={email:this.userEmail};return Object(n["y"])(e).then(e=>{e.data.result?(this.$Message.success("切换成功"),window.AuthCache={},this.visible=!1,location.reload()):this.$Message.error("切换失败")}).catch(e=>{this.$Message.error("切换失败"+e.message)})}}},r=o,l=s("2be6"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["a"]=c.exports},"9d64":function(e,t,s){e.exports=s.p+"static/img/logo.e68c14b2.png"},b0f9:function(e,t,s){"use strict";s.d(t,"k",(function(){return i})),s.d(t,"m",(function(){return n})),s.d(t,"n",(function(){return o})),s.d(t,"j",(function(){return r})),s.d(t,"l",(function(){return l})),s.d(t,"i",(function(){return c})),s.d(t,"e",(function(){return u})),s.d(t,"h",(function(){return d})),s.d(t,"d",(function(){return m})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return v})),s.d(t,"f",(function(){return b})),s.d(t,"b",(function(){return f}));var a=s("dde5");const i=e=>Object(a["c"])("api/template","getTemplate",e),n=e=>Object(a["c"])("api/template","listTemplates",e),o=e=>Object(a["c"])("api/template","updateTemplate",e),r=e=>Object(a["c"])("api/template","deleteTemplate",e),l=e=>Object(a["c"])("api/template","listMyTemplates",e),c=e=>Object(a["c"])("api/template","createTemplate",e),u=e=>Object(a["c"])("api/template","getTemplateLevel",e),d=e=>Object(a["c"])("api/template","updateTemplatePublic",e),m=e=>Object(a["c"])("api/template","deleteTemplate",e),p=e=>Object(a["c"])("api/template","listTemplatesByProject",e),h=e=>Object(a["c"])("api/template","addProjectTemplate",e),v=e=>Object(a["c"])("api/template","deleteProjectTemplate",e),f=e=>Object(a["c"])("api/template","copyTemplate",e),b=e=>Object(a["c"])("api/label","listTemplateLabels",e)},bd1f:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.companyInfo?s("fragment",[e.isPublishable?[e._t("default")]:[e._t("forbidden")]],2):e._e()},i=[],n={props:{store:Object},data(){return{isPublishable:!1}},computed:{companyInfo(){var e,t,s,a;return(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.companyinfo)||(null===(s=this.store)||void 0===s||null===(a=s.state)||void 0===a?void 0:a.companyinfo)}},mounted(){var e;null!==(e=this.companyInfo)&&void 0!==e&&e.is_publishable&&(this.isPublishable=!0)}},o=n,r=s("2be6"),l=Object(r["a"])(o,a,i,!1,null,null,null);t["a"]=l.exports},c605:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table-filter"},[s("t-row",{staticStyle:{"flex-wrap":"nowrap"}},[s("t-col",{attrs:{flex:"auto"}},[e._t("default")],2),s("t-col",{attrs:{flex:"150px"}},[s("div",{staticClass:"right-buttom",style:{border:"horizontal"===e.btnDirection?"none":""}},[e._t("filterOperate",(function(){return[s("t-space",{attrs:{direction:e.btnDirection}},[s("t-button",{attrs:{theme:"primary",loading:e.searchLoading},on:{click:e.handleSearch}},[s("t-icon",{attrs:{slot:"icon",name:"search"},slot:"icon"}),e._v("查询")],1),s("t-button",{attrs:{theme:"default",disabled:e.searchLoading},on:{click:e.handleReset}},[s("t-icon",{attrs:{slot:"icon",name:"refresh"},slot:"icon"}),e._v("重置")],1)],1)]}))],2)])],1),s("t-divider")],1)},i=[],n={name:"TableFilter",props:{btnDirection:{type:String,default:"vertical"},searchLoading:{type:Boolean,default:!1}},methods:{handleSearch(){this.$emit("search")},handleReset(){this.$emit("reset")}}},o=n,r=(s("e170"),s("2be6")),l=Object(r["a"])(o,a,i,!1,null,"d8a73384",null);t["a"]=l.exports},cc14:function(e,t,s){},e170:function(e,t,s){"use strict";s("2c663")}}]);