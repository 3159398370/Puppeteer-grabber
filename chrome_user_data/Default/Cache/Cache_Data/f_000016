(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dataview-group"],{"0424":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("Sider",{class:e.isGlobalGray&&"global-gray",style:{background:"#fff"},attrs:{"hide-trigger":"",width:220}},[a("Menu",{ref:"menu",attrs:{"active-name":e.activeName,theme:"light",width:"auto","open-names":["1","2"]}},[a("Submenu",{directives:[{name:"permissions",rawName:"v-permissions",value:{domain:"menu",action:"view",extra:{name:"dashboard"}},expression:"{domain: 'menu', action: 'view', extra: {name: 'dashboard'}}"}],attrs:{name:"1"}},[a("template",{slot:"title"},[a("span",[e._v("概览")])]),a("MenuItem",{attrs:{name:"/dashborad",to:"/dataview/dashborad"}},[e._v("仪表盘")])],2),a("Submenu",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("span",[e._v("数据报表")])]),a("div",{directives:[{name:"permissions",rawName:"v-permissions",value:{domain:"dataview",action:"view",extra:{name:"project-monitor"}},expression:"{domain: 'dataview', action: 'view', extra: {name: 'project-monitor'}}"}]},[a("MenuItem",{attrs:{name:"/project-monitor",to:"/dataview/project-monitor"}},[e._v("项目监控报表")])],1),a("div",{directives:[{name:"permissions",rawName:"v-permissions",value:{domain:"dataview",action:"view",extra:{name:"company-monitor"}},expression:"{domain: 'dataview', action: 'view', extra: {name: 'company-monitor'}}"}]},[a("MenuItem",{attrs:{name:"/company-monitor",to:"/dataview/company-monitor"}},[e._v("执行方监控报表")])],1),e.Config.PRIVATIZATION?e._e():a("MenuItem",{attrs:{name:"/work-time",to:"/dataview/work-time"}},[e._v("执行方工时报表")])],2)],1)],1),a("Layout",{staticClass:"layout-container"},[a("Content",{class:{"layout-container-content":"/dashborad"!==e.activeName}},[a("router-view")],1),a("Copyright")],1)],1)},r=[],n=a("2a20"),o=a("db49");const c=["2022-12-05 18:00:00","2022-12-07 09:00:00"];var l={components:{Copyright:n["default"]},data(){const e=new Date,t=new Date(c[0]),a=new Date(c[1]);return{isGlobalGray:e>=t&&e<=a&&o["a"].INSIDE_DOMAIN,Config:o["a"]}},computed:{activeName(){return this.$route.path.match(/(\/[\w-]+)/g)[1]}}},i=l,m=a("2be6"),p=Object(m["a"])(i,s,r,!1,null,null,null);t["default"]=p.exports},"10f8":function(e,t,a){},"1abd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-monitor"},[e.Config.PRIVATIZATION?a("br"):a("TableFilter",{attrs:{searchLoading:e.loading},on:{reset:function(t){return e.fetchReportDatas({reset:!0})},search:function(t){return e.fetchReportDatas({reset:!1})}}},[a("Form",{attrs:{"label-width":90,"label-colon":!0}},[a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目编号"},model:{value:e.searchParams.project_id,callback:function(t){e.$set(e.searchParams,"project_id",t)},expression:"searchParams.project_id"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目名称"},model:{value:e.searchParams.project_name,callback:function(t){e.$set(e.searchParams,"project_name",t)},expression:"searchParams.project_name"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目类型"}},[a("Select",{attrs:{clearable:"",placeholder:"--请选择--"},model:{value:e.searchParams.project_type,callback:function(t){e.$set(e.searchParams,"project_type",t)},expression:"searchParams.project_type"}},e._l(e.PorjectType,(function(t){var s=t.value,r=t.label;return a("Option",{key:s,attrs:{value:s}},[e._v(e._s(r))])})),1)],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目状态"}},[a("Select",{attrs:{clearable:"",placeholder:"--请选择--"},model:{value:e.searchParams.project_status,callback:function(t){e.$set(e.searchParams,"project_status",t)},expression:"searchParams.project_status"}},e._l(e.PorjectStatus,(function(t){var s=t.value,r=t.label;return a("Option",{key:s,attrs:{value:s}},[e._v(e._s(r))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",options:e.dataPickerOptions,placement:"bottom-end",placeholder:"请选择创建时间"},model:{value:e.searchParams.queryDate,callback:function(t){e.$set(e.searchParams,"queryDate",t)},expression:"searchParams.queryDate"}})],1)],1)],1)],1)],1),a("tableArea",{attrs:{tableLists:e.tableLists},on:{"export-report-datas":e.exportReportDatas}})],1)},r=[],n=a("b0cd"),o=a("175d"),c=a("2289"),l=a("db49"),i=a("c206"),m=a.n(i),p=a("c605"),u={components:{TableFilter:p["a"]},mixins:[n["a"]],data(){return{Config:l["a"],PorjectStatus:c["f"],PorjectType:c["g"],searchParams:{project_id:"",project_name:"",project_type:"",project_status:"",queryDate:[]},dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}},stageMetadata:this.$OptimusStageMetadata,tableLists:[{label:"数据状态",component:"dataStateTable"},{label:"质量监控",component:"qualityMonitorTable"}]}},methods:{resetSearchParams(){this.searchParams={project_id:"",project_name:"",project_type:"",project_status_str:"",queryDate:""}},exportReportDatas(){const{queryDate:e,...t}=this.searchParams,a={...t};e&&e[0]&&e[1]&&(a.begin_date=m()(e[0]).format("YYYY-MM-DD HH:mm:ss"),a.end_date=m()(e[1]).format("YYYY-MM-DD HH:mm:ss")),Object(o["w"])({method:"project-report-details-new",data:{...a}})}}},d=u,h=a("2be6"),_=Object(h["a"])(d,s,r,!1,null,"35b4971a",null);t["default"]=_.exports},"1d76":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"work-time"},[a("TableFilter",{attrs:{searchLoading:e.loading},on:{reset:function(t){return e.fetchReportDatas({reset:!0})},search:function(t){return e.fetchReportDatas({reset:!1})}}},[a("Form",{attrs:{"label-width":90,"label-colon":!0}},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"成员编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入成员编号"},model:{value:e.searchParams.user_id,callback:function(t){e.$set(e.searchParams,"user_id",t)},expression:"searchParams.user_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"成员名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入成员名称"},model:{value:e.searchParams.nick_name,callback:function(t){e.$set(e.searchParams,"nick_name",t)},expression:"searchParams.nick_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"公司名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入公司名称"},model:{value:e.searchParams.company_name,callback:function(t){e.$set(e.searchParams,"company_name",t)},expression:"searchParams.company_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"项目编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目编号"},model:{value:e.searchParams.project_id,callback:function(t){e.$set(e.searchParams,"project_id",t)},expression:"searchParams.project_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"项目名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目名称"},model:{value:e.searchParams.project_name,callback:function(t){e.$set(e.searchParams,"project_name",t)},expression:"searchParams.project_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"任务编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入任务编号"},model:{value:e.searchParams.task_id,callback:function(t){e.$set(e.searchParams,"task_id",t)},expression:"searchParams.task_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"任务名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入任务名称"},model:{value:e.searchParams.task_name,callback:function(t){e.$set(e.searchParams,"task_name",t)},expression:"searchParams.task_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"标注场景"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-clear":function(t){e.searchParams.template_scene="",e.searchParams.template_level=""}},model:{value:e.searchParams.template_scene,callback:function(t){e.$set(e.searchParams,"template_scene",t)},expression:"searchParams.template_scene"}},e._l(e.TemplateScenes,(function(t){return a("Option",{key:t,staticClass:"mrl",attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"模板类型"}},[a("Select",{attrs:{remote:"",clearable:"",filterable:""},on:{"on-clear":function(t){e.searchParams.template_level=""}},model:{value:e.searchParams.template_level1,callback:function(t){e.$set(e.searchParams,"template_level1",t)},expression:"searchParams.template_level1"}},e._l(e.templateLevels,(function(e){return a("Option",{key:e.template_id,attrs:{value:e.template_level1,label:e.template_level1+(e.template_level2?" / "+e.template_level2:"")}})})),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"小组编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入小组编号"},model:{value:e.searchParams.team_id,callback:function(t){e.$set(e.searchParams,"team_id",t)},expression:"searchParams.team_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"小组名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入小组名称"},model:{value:e.searchParams.team_name,callback:function(t){e.$set(e.searchParams,"team_name",t)},expression:"searchParams.team_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"统计时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",options:e.dataPickerOptions,placeholder:"选择统计时间"},model:{value:e.searchParams.queryDate,callback:function(t){e.$set(e.searchParams,"queryDate",t)},expression:"searchParams.queryDate"}})],1)],1)],1)],1)],1),a("tableArea",{attrs:{tableLists:e.tableLists},on:{"export-report-datas":e.exportReportDatas}})],1)},r=[],n=a("b0cd"),o=a("175d"),c=a("b0f9"),l=a("2289"),i=a("9ec3"),m=a("c206"),p=a.n(m),u=a("c605");const d={user_id:"",nick_name:"",company_name:"",project_id:"",project_name:"",queryDate:[],task_id:"",task_name:"",team_id:"",team_name:"",template_level1:"",template_scene:""};var h={components:{TableFilter:u["a"]},mixins:[n["a"]],data(){return{TemplateScenes:l["i"],searchParams:Object.assign({},{},d),dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}},tableLists:[{label:"标注",component:"workTimeLabelTable"},{label:"标注质检",component:"workTimeReviewTable"},{label:"审核质检",component:"workTimeAuditReviewTable"},{label:"验收质检",component:"workTimeDeliverReviewTable"}]}},watch:{"searchParams.template_scene"(){this.searchParams.template_scene?this.fetchTemplateLevels():this.templateLevels=[]}},methods:{toHump(e){return Object(i["isString"])(e)?e.replace(/_(\w)/g,(e,t)=>t.toUpperCase()):"error"},resetSearchParams(){this.searchParams=Object.assign({},{},d)},exportReportDatas(e){const{queryDate:t,...a}=this.searchParams,{statType:s,cycleStep:r}=e,n={};Object(i["forIn"])({...a,...e||{}},(e,t)=>{e&&"queryDate"!==t&&(n[this.toHump(t)]=e)}),t&&t[0]&&t[1]&&(n.beginDate=p()(t[0]).format("YYYY-MM-DD HH:mm:ss"),n.endDate=p()(t[1]).format("YYYY-MM-DD HH:mm:ss")),Object.assign(n,{statType:s,cycleStep:r}),Object(o["w"])({method:"time-report",data:{...n},etr:"/report"})}},asyncMethods:{fetchTemplateLevels(){const e={template_scene:this.searchParams.template_scene,is_all:1};return Object(c["e"])(e).then(e=>e)}}},_=h,b=(a("7cbe"),a("2be6")),f=Object(b["a"])(_,s,r,!1,null,"2c04f558",null);t["default"]=f.exports},2779:function(e,t,a){"use strict";a("fcdc")},"2cf4":function(e,t,a){},"2e98":function(e,t,a){},"30cb":function(e,t,a){},"31b8":function(e,t,a){"use strict";a("9371")},"38d8":function(e,t,a){},"4c89":function(e,t,a){},5994:function(e,t,a){"use strict";a("e0e9")},6209:function(e,t,a){},63249:function(e,t,a){},"69d4":function(e,t,a){"use strict";a("f0b3")},"79b6":function(e,t,a){"use strict";a("2cf4")},"7ae9":function(e,t,a){"use strict";a("2e98")},"7cba":function(e,t,a){"use strict";a("10f8")},"7cbe":function(e,t,a){"use strict";a("38d8")},"81a0":function(e,t,a){},"86c9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"work-time"},[a("TableFilter",{attrs:{searchLoading:e.loading},on:{search:function(t){return e.fetchReportDatas({reset:!1})},reset:function(t){return e.fetchReportDatas({reset:!0})}}},[a("Form",{attrs:{"label-width":90,"label-colon":!0}},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"成员编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入成员编号"},model:{value:e.searchParams.user_id,callback:function(t){e.$set(e.searchParams,"user_id",t)},expression:"searchParams.user_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"成员名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入成员名称"},model:{value:e.searchParams.nick_name,callback:function(t){e.$set(e.searchParams,"nick_name",t)},expression:"searchParams.nick_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"公司名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入公司名称"},model:{value:e.searchParams.company_name,callback:function(t){e.$set(e.searchParams,"company_name",t)},expression:"searchParams.company_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"任务编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入任务编号"},model:{value:e.searchParams.task_id,callback:function(t){e.$set(e.searchParams,"task_id",t)},expression:"searchParams.task_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"任务名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入任务名称"},model:{value:e.searchParams.task_name,callback:function(t){e.$set(e.searchParams,"task_name",t)},expression:"searchParams.task_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"标注场景"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-clear":function(t){e.searchParams.template_scene="",e.searchParams.template_level=""}},model:{value:e.searchParams.template_scene,callback:function(t){e.$set(e.searchParams,"template_scene",t)},expression:"searchParams.template_scene"}},e._l(e.TemplateScenes,(function(t){return a("Option",{key:t,staticClass:"mrl",attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"模板类型"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-clear":function(t){e.searchParams.template_level=""}},model:{value:e.searchParams.template_level,callback:function(t){e.$set(e.searchParams,"template_level",t)},expression:"searchParams.template_level"}},e._l(e.templateLevels,(function(e){return a("Option",{key:e.template_id,attrs:{value:e.template_id,label:e.template_level1+(e.template_level2?" / "+e.template_level2:"")}})})),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"小组编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入小组编号"},model:{value:e.searchParams.team_id,callback:function(t){e.$set(e.searchParams,"team_id",t)},expression:"searchParams.team_id"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"小组名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入小组名称"},model:{value:e.searchParams.team_name,callback:function(t){e.$set(e.searchParams,"team_name",t)},expression:"searchParams.team_name"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"统计时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",options:e.dataPickerOptions,placeholder:"选择统计时间"},model:{value:e.searchParams.queryDate,callback:function(t){e.$set(e.searchParams,"queryDate",t)},expression:"searchParams.queryDate"}})],1)],1)],1)],1)],1),a("tableArea",{attrs:{tableLists:e.tableLists},on:{"export-report-datas":e.exportReportDatas}})],1)},r=[],n=a("b0cd"),o=a("175d"),c=a("b0f9"),l=a("2289"),i=a("9ec3"),m=a("c206"),p=a.n(m),u=a("c605");const d={user_id:"",nick_name:"",company_name:"",queryDate:[],task_id:"",task_name:"",team_id:"",team_name:"",template_level:"",template_scene:""};var h={components:{TableFilter:u["a"]},mixins:[n["a"]],data(){return{TemplateScenes:l["i"],searchParams:Object.assign({},{},d),dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}},tableLists:[{label:"标注",component:"workbenchWorkTimeLabelTable"},{label:"标注质检",component:"workbenchWorkTimeReviewTable"},{label:"审核质检",component:"workbenchWorkTimeAuditReviewTable"},{label:"验收质检",component:"workbenchWorkTimeDeliverReviewTable"}]}},watch:{"searchParams.template_scene"(){this.searchParams.template_scene?this.fetchTemplateLevels():this.templateLevels=[]}},methods:{toHump(e){return Object(i["isString"])(e)?e.replace(/_(\w)/g,(e,t)=>t.toUpperCase()):"error"},resetSearchParams(){this.searchParams=Object.assign({},{},d)},exportReportDatas(e){const{queryDate:t,...a}=this.searchParams,{statType:s,cycleStep:r}=e,n={};Object(i["forIn"])({...a,...e||{}},(e,t)=>{e&&"queryDate"!==t&&(n[this.toHump(t)]=e)}),t&&t[0]&&t[1]&&(n.beginDate=p()(t[0]).format("YYYY-MM-DD HH:mm:ss"),n.endDate=p()(t[1]).format("YYYY-MM-DD HH:mm:ss")),Object.assign(n,{statType:s,cycleStep:r}),Object(o["w"])({method:"workbench-time-report",data:{...n},etr:"/report"})}},asyncMethods:{fetchTemplateLevels(){const e={template_scene:this.searchParams.template_scene,is_all:1};return Object(c["e"])(e).then(e=>e)}}},_=h,b=(a("c90e"),a("2be6")),f=Object(b["a"])(_,s,r,!1,null,"39ae4112",null);t["default"]=f.exports},9327:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-delay"},[a("Breadcrumb",[a("BreadcrumbItem",[e._v("数据报表")]),a("BreadcrumbItem",[e._v("项目延期报表")])],1),a("t-divider",{attrs:{align:"left"}},[a("h3",[e._v("项目延期报表")])]),a("auth-view",{attrs:{perm:{domain:"anysis",action:"view-platform-reports",extra:{company:e.user.company_id.toString()}}}},[a("tableFilter",{attrs:{searchLoading:e.loading},on:{search:function(t){return e.fetchReportDatas({reset:!1})},reset:function(t){return e.fetchReportDatas({reset:!0})}}},[a("Form",{staticStyle:{"margin-top":"30px"},attrs:{"label-width":90,"label-colon":!0}},[a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"项目编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目编号"},model:{value:e.searchParams.project_id,callback:function(t){e.$set(e.searchParams,"project_id",t)},expression:"searchParams.project_id"}})],1)],1),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"项目名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目名称"},model:{value:e.searchParams.project_name,callback:function(t){e.$set(e.searchParams,"project_name",t)},expression:"searchParams.project_name"}})],1)],1),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"标注场景"}},[a("Select",{attrs:{clearable:"",placeholder:"--请选择--"},on:{"on-change":e.templateSceneChange},model:{value:e.searchParams.template_type_name,callback:function(t){e.$set(e.searchParams,"template_type_name",t)},expression:"searchParams.template_type_name"}},e._l(e.TemplateScenes,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"模板类型"}},[a("Select",{attrs:{clearable:"",placeholder:"--请选择--"},on:{"on-change":e.templateLevelChange},model:{value:e.templateLevel,callback:function(t){e.templateLevel=t},expression:"templateLevel"}},e._l(e.templateLevels,(function(e){return a("Option",{key:e.template_id,attrs:{value:e.template_id,label:e.template_level1+(e.template_level2?" / "+e.template_level2:"")}})})),1)],1)],1)],1)],1)],1),a("tableArea",{attrs:{tableLists:e.tableLists},on:{"export-report-datas":e.exportReportDatas}})],1)],1)},r=[],n=a("b0cd"),o=a("175d"),c=a("b0f9"),l=a("2289"),i=a("9ec3"),m=a("c605"),p={components:{tableFilter:m["a"]},mixins:[n["a"]],data(){return{TemplateScenes:l["i"],templateLevel:"",searchParams:{project_id:"",project_name:"",template_type_name:"",template_type1_name:"",template_type2_name:""},stageMetadata:this.$OptimusStageMetadata,dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}},tableLists:[{label:"数据列表",component:"dataListTable"}]}},asyncMethods:{fetchTemplateLevels(){const e={is_all:1,template_scene:this.searchParams.template_type_name};return Object(c["e"])(e).then(e=>e)}},methods:{resetSearchParams(){this.searchParams={project_id:"",project_name:"",template_type_name:"",template_type1_name:"",template_type2_name:""},this.templateLevel=""},templateSceneChange(e){e?this.fetchTemplateLevels():(this.templateLevel="",this.templateLevels=[])},templateLevelChange(e){if(e){const t=Object(i["find"])(this.templateLevels,["template_id",e]);t.template_level1&&(this.searchParams.template_type1_name=t.template_level1),t.template_level2&&(this.searchParams.template_type2_name=t.template_level2)}else this.searchParams.template_type1_name="",this.searchParams.template_type2_name=""},exportReportDatas(){Object(o["w"])({method:"project-delay-report-details",data:{...this.searchParams}})}}},u=p,d=(a("c3c4"),a("2be6")),h=Object(d["a"])(u,s,r,!1,null,"2f811567",null);t["default"]=h.exports},9371:function(e,t,a){},9861:function(e,t,a){"use strict";a("6209")},c3c4:function(e,t,a){"use strict";a("ffee")},c90e:function(e,t,a){"use strict";a("81a0")},d304:function(e,t,a){"use strict";a("63249")},dca2:function(e,t,a){"use strict";a("30cb")},de4f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"company-monitor"},[e.Config.PRIVATIZATION?a("br"):a("TableFilter",{attrs:{searchLoading:e.loading},on:{reset:function(t){return e.fetchReportDatas({reset:!0})},search:function(t){return e.fetchReportDatas({reset:!1})}}},[a("Form",{attrs:{"label-width":90,"label-colon":!0}},[a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"公司编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入公司编号"},model:{value:e.searchParams.company_id,callback:function(t){e.$set(e.searchParams,"company_id",t)},expression:"searchParams.company_id"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"公司名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入公司名称"},model:{value:e.searchParams.company_name,callback:function(t){e.$set(e.searchParams,"company_name",t)},expression:"searchParams.company_name"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目编号"},model:{value:e.searchParams.project_id,callback:function(t){e.$set(e.searchParams,"project_id",t)},expression:"searchParams.project_id"}})],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目名称"},model:{value:e.searchParams.project_name,callback:function(t){e.$set(e.searchParams,"project_name",t)},expression:"searchParams.project_name"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"任务编号"}},[a("Input",{attrs:{type:"text",placeholder:"输入任务编号"},model:{value:e.searchParams.task_id,callback:function(t){e.$set(e.searchParams,"task_id",t)},expression:"searchParams.task_id"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"任务名称"}},[a("Input",{attrs:{type:"text",placeholder:"输入任务名称"},model:{value:e.searchParams.task_name,callback:function(t){e.$set(e.searchParams,"task_name",t)},expression:"searchParams.task_name"}})],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"标注场景"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-change":e.templateSceneChange,"on-clear":function(t){e.searchParams.template_scene="",e.searchParams.template_level=""}},model:{value:e.searchParams.template_scene,callback:function(t){e.$set(e.searchParams,"template_scene",t)},expression:"searchParams.template_scene"}},e._l(e.TemplateScenes,(function(t){return a("Option",{key:t,staticClass:"mrl",attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"模板类型"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-clear":function(t){e.searchParams.template_level1=""}},model:{value:e.searchParams.template_level1,callback:function(t){e.$set(e.searchParams,"template_level1",t)},expression:"searchParams.template_level1"}},e._l(e.templateLevels,(function(e){return a("Option",{key:e.template_level1,attrs:{value:e.template_level1,label:e.template_level1}})})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"统计区间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",options:e.dataPickerOptions,placeholder:"选择统计区间"},model:{value:e.searchParams.queryDate,callback:function(t){e.$set(e.searchParams,"queryDate",t)},expression:"searchParams.queryDate"}})],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"项目对接人"}},[a("Input",{attrs:{type:"text",placeholder:"输入项目对接人"},model:{value:e.searchParams.project_creator,callback:function(t){e.$set(e.searchParams,"project_creator",t)},expression:"searchParams.project_creator"}})],1)],1)],1)],1)],1),a("tableArea",{attrs:{tableLists:e.tableLists},on:{"export-report-datas":e.exportReportDatas}})],1)},r=[],n=a("b0cd"),o=a("175d"),c=a("c206"),l=a.n(c),i=a("db49"),m=a("b0f9"),p=a("2289"),u=a("c605"),d={components:{TableFilter:u["a"]},mixins:[n["a"]],data(){return{Config:i["a"],TemplateScenes:p["i"],searchParams:{company_id:"",company_name:"",project_id:"",project_name:"",task_id:"",task_name:void 0,template_scene:"",template_level1:"",queryDate:[],project_creator:""},dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}},tableLists:[{label:"基本统计",component:"baseInfoTable"},{label:"标注",component:"companyMonitorLabelTable"},{label:"质检",component:"companyMonitorReviewTable"},{label:"(验收)质量分析",component:"qualityReviewTable"}]}},asyncMethods:{fetchTemplateLevels(){const e={is_all:1,template_scene:this.searchParams.template_scene};return Object(m["e"])(e).then(e=>{const t=new Set,a=e.filter(e=>!t.has(e.template_level1)&&t.add(e.template_level1));return a})}},methods:{resetSearchParams(){this.searchParams={company_id:"",company_name:"",project_id:"",project_name:"",task_id:"",task_name:void 0,template_scene:"",template_level1:"",queryDate:[],project_creator:""}},templateSceneChange(e){e?this.fetchTemplateLevels():this.templateLevels=[]},exportReportDatas(){const{queryDate:e,...t}=this.searchParams,a={...t};e&&e[0]&&e[1]&&(a.begin_date=l()(e[0]).format("YYYY-MM-DD HH:mm:ss"),a.end_date=l()(e[1]).format("YYYY-MM-DD HH:mm:ss")),this.searchParams.task_name||delete a.task_name,Object(o["w"])({method:"project-supplier-report-details-new",data:{...a}})}}},h=d,_=a("2be6"),b=Object(_["a"])(h,s,r,!1,null,"2f8424b8",null);t["default"]=b.exports},e0e9:function(e,t,a){},f0b3:function(e,t,a){},f8a5:function(e,t,a){"use strict";a("4c89")},fcdc:function(e,t,a){},fea6:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"version",(function(){return p["cb"]})),a.d(s,"dependencies",(function(){return p["l"]})),a.d(s,"PRIORITY",(function(){return p["g"]})),a.d(s,"init",(function(){return p["B"]})),a.d(s,"connect",(function(){return p["j"]})),a.d(s,"disConnect",(function(){return p["m"]})),a.d(s,"disconnect",(function(){return p["n"]})),a.d(s,"dispose",(function(){return p["o"]})),a.d(s,"getInstanceByDom",(function(){return p["w"]})),a.d(s,"getInstanceById",(function(){return p["x"]})),a.d(s,"registerTheme",(function(){return p["R"]})),a.d(s,"registerPreprocessor",(function(){return p["P"]})),a.d(s,"registerProcessor",(function(){return p["Q"]})),a.d(s,"registerPostInit",(function(){return p["N"]})),a.d(s,"registerPostUpdate",(function(){return p["O"]})),a.d(s,"registerUpdateLifecycle",(function(){return p["T"]})),a.d(s,"registerAction",(function(){return p["H"]})),a.d(s,"registerCoordinateSystem",(function(){return p["I"]})),a.d(s,"getCoordinateSystemDimensions",(function(){return p["v"]})),a.d(s,"registerLocale",(function(){return p["L"]})),a.d(s,"registerLayout",(function(){return p["J"]})),a.d(s,"registerVisual",(function(){return p["U"]})),a.d(s,"registerLoading",(function(){return p["K"]})),a.d(s,"setCanvasCreator",(function(){return p["V"]})),a.d(s,"registerMap",(function(){return p["M"]})),a.d(s,"getMap",(function(){return p["y"]})),a.d(s,"registerTransform",(function(){return p["S"]})),a.d(s,"dataTool",(function(){return p["k"]})),a.d(s,"zrender",(function(){return p["eb"]})),a.d(s,"matrix",(function(){return p["D"]})),a.d(s,"vector",(function(){return p["bb"]})),a.d(s,"zrUtil",(function(){return p["db"]})),a.d(s,"color",(function(){return p["i"]})),a.d(s,"throttle",(function(){return p["X"]})),a.d(s,"helper",(function(){return p["A"]})),a.d(s,"use",(function(){return p["Z"]})),a.d(s,"setPlatformAPI",(function(){return p["W"]})),a.d(s,"parseGeoJSON",(function(){return p["F"]})),a.d(s,"parseGeoJson",(function(){return p["G"]})),a.d(s,"number",(function(){return p["E"]})),a.d(s,"time",(function(){return p["Y"]})),a.d(s,"graphic",(function(){return p["z"]})),a.d(s,"format",(function(){return p["u"]})),a.d(s,"util",(function(){return p["ab"]})),a.d(s,"env",(function(){return p["p"]})),a.d(s,"List",(function(){return p["e"]})),a.d(s,"Model",(function(){return p["f"]})),a.d(s,"Axis",(function(){return p["a"]})),a.d(s,"ComponentModel",(function(){return p["c"]})),a.d(s,"ComponentView",(function(){return p["d"]})),a.d(s,"SeriesModel",(function(){return p["h"]})),a.d(s,"ChartView",(function(){return p["b"]})),a.d(s,"innerDrawElementOnCanvas",(function(){return p["C"]})),a.d(s,"extendComponentModel",(function(){return p["r"]})),a.d(s,"extendComponentView",(function(){return p["s"]})),a.d(s,"extendSeriesModel",(function(){return p["t"]})),a.d(s,"extendChartView",(function(){return p["q"]}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashborad-index"},[a("auth-view",{attrs:{perm:{domain:"menu",action:"view",extra:{name:"dashboard"}}}},[a("div",{staticClass:"forbidden",attrs:{slot:"forbidden"},slot:"forbidden"},[a("Deny")],1),a("div",{staticClass:"permitted"},[a("auth-view",{attrs:{perm:{domain:"anysis",action:"view-overview-result",extra:{}}}},[a("over-view",{attrs:{user:e.user}})],1),a("auth-view",{attrs:{perm:{domain:"anysis",action:"view-company-result",extra:{company:e.user.company_id.toString()}}}},[a("company-view",{attrs:{user:e.user}})],1)],1)])],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overview"},[a("Row",{staticClass:"part-one",attrs:{gutter:64}},[a("Col",{attrs:{span:"12"}},[a("stage-statistics",{staticClass:"dashborad-item"})],1),a("Col",{staticClass:"part-one-right",attrs:{span:"12"}},[a("div",{staticClass:"bottom dashborad-item"},[a("user-statistics")],1)])],1),e.Config.PRIVATIZATION?[a("br")]:[a("Row",{staticClass:"part-two dashborad-item"},[a("Col",{attrs:{span:"24"}},[a("sort-board")],1)],1)]],2)},c=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",{staticClass:"stage-statistics"},[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[e._v("标注类别占比")]),a("div",{staticClass:"right"},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":e.setChartData},model:{value:e.chartType,callback:function(t){e.chartType=t},expression:"chartType"}},[a("Radio",{attrs:{label:0}},[e._v("标注场景")]),a("Radio",{attrs:{label:1}},[e._v("模板类型")])],1)],1)]),a("div",{ref:"chart",staticClass:"chart"})])],1)},i=[],m=(a("28eb"),a("be5c")),p=a("74dd"),u=a("e4ca"),d=a("0fac"),h=a("52ed"),_=a("2fca"),b=a("5cfd"),f=function(e){return m["a"]([u["a"],d["a"],h["a"],_["a"],b["a"],...e]),s},v=a("c253"),y=a("dde5");const C=e=>Object(y["c"])("api/anysis","analysisAllComponentType",e),P=e=>Object(y["c"])("api/anysis","analysisWeek",e),D=e=>Object(y["c"])("api/anysis","analysisRank",e),g=e=>Object(y["c"])("api/anysis","analysisCompany",e),k=e=>Object(y["c"])("api/anysis","analysisCompanyProject",e);var w={data(){return{chart:null,chartType:0}},created(){},mounted(){const e=this.$refs.chart,t=function(){e&&(e.style.width="40vw",e.style.height="40vh")};t(),this.chart=f([v["a"]]).init(this.$refs.chart),this.chart.showLoading(),this.setChartData(),window.addEventListener("resize",this.resizeChart);const a=this;this.chart.setOption({title:{text:"总项目数",subtext:"",left:"30%",top:"middle",textAlign:"center",textVerticalAlign:"middle",itemGap:15,textStyle:{color:"rgba(0, 0, 0, 0.45)",fontWeight:400,fontSize:18},subtextStyle:{fontWeight:400,color:"rgba(0, 0, 0, 0.85)",fontSize:32}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",animation:!1,orient:"vertical",left:"55%",top:"20%",height:"70%",icon:"circle",itemGap:20,formatter(e){const{data:t}=a.chart.getOption().series[0];let s=0,r=0;for(let a=0,o=t.length;a<o;a++)s+=t[a].value,t[a].name===e&&(r=t[a].value);const n=(r/s*100).toFixed(2);return e.length>8&&(e=e.slice(0,8)+"..."),[`${e} {percent| |  ${n}%}  {number| ${r.toLocaleString("en-US")}}`]},tooltip:{show:!0},textStyle:{fontSize:16,rich:{percent:{color:"rgba(0, 0, 0, 0.45)",fontSize:14},number:{color:"rgba(0, 0, 0, 0.65)",fontSize:14}}}},series:[{name:"总项目数",type:"pie",color:["#4E9DE6","#8CE2E2","#73DB92","#FBD437","#F04864","#F98E2D","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],radius:["55%","70%"],center:["30%","50%"],itemStyle:{borderColor:"#fff",borderWidth:4},label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:[]}]}),this.chart.on("legendselectchanged",(function(e){const t=this.getOption();console.log(t),t.legend[0].selected[e.name]=!0,this.setOption(t)}))},destroyed(){window.removeEventListener("resize",this.resizeChart)},asyncMethods:{fetchChartData(){const e={};return e.component_type=this.chartType,C(e).then(e=>e)}},methods:{resizeChart(){this.chart.resize()},setChartData(){this.fetchChartData().then(e=>{const t=e.map(e=>({name:e.name,value:e.num})).reverse(),a=t.reduce((e,t)=>e+t.value,0);this.chart.hideLoading(),this.chart.setOption({title:{subtext:a.toLocaleString("en-US")},series:[{name:"总项目数",data:t}]})})}}},x=w,j=(a("f8a5"),a("2be6")),I=Object(j["a"])(x,l,i,!1,null,"5d518011",null),S=I.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-statistics"},[a("Row",[a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"title"},[e._v("累计注册公司")])]),a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"title"},[e._v("累计用户数")])])],1),e.fetchUserData.isResolved?a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"number"},[e._v(e._s(e._f("comma")(e.userData.company_data.total_num)))]),a("span",[e._v("家")])]),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"number"},[e._v(e._s(e._f("comma")(e.userData.user_data.total_num)))])])],1):e._e(),e.fetchUserData.isResolved?a("Row",[a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"compare"},[a("span",[e._v("上周同期")]),a("span",{staticClass:"percent"},[e._v(e._s(e.userData.company_data.up_pencent))]),"0.00%"!==e.userData.company_data.up_pencent?a("Icon",{staticStyle:{color:"red"},attrs:{type:"md-arrow-dropup"}}):e._e()],1)]),a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"compare"},[a("span",[e._v("上周同期")]),a("span",{staticClass:"percent"},[e._v(e._s(e.userData.user_data.up_pencent))]),"0.00%"!==e.userData.user_data.up_pencent?a("Icon",{staticStyle:{color:"red"},attrs:{type:"md-arrow-dropup"}}):e._e()],1)])],1):e._e()],1)},F=[],R={asyncMethods:{fetchUserData(){return P().then(e=>e)}},created(){this.fetchUserData()},methods:{}},T=R,$=(a("9861"),Object(j["a"])(T,O,F,!1,null,"1cbe823e",null)),L=$.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sort-borad"},[a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[e._v("统计排行榜")]),a("div",{staticClass:"right"},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":e.fetchSortData},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("Radio",{attrs:{label:0}},[e._v("按任务")]),a("Radio",{attrs:{label:1}},[e._v("按项目")])],1),a("DatePicker",{staticStyle:{"margin-left":"24px",width:"200px"},attrs:{type:"datetimerange",placement:"bottom-end",clearable:!1,options:e.dataPickerOptions,placeholder:"选择日期"},on:{"on-change":e.fetchSortData},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)]),a("div",{staticClass:"borad-list"},[e.fetchSortData.isPending?a("Spin",{attrs:{fix:""}}):e.fetchSortData.isResolved?[a("borad-item",{attrs:{title:"公司承接"+(0===e.type?"任务":"项目")+"数排名",dataSet:0===e.type?e.sortData.company_ac_task:e.sortData.company_ac_project}}),a("borad-item",{attrs:{title:"各BG发布"+(0===e.type?"任务":"项目")+"数排名",dataSet:0===e.type?e.sortData.bg_ac_task:e.sortData.bg_ac_project}}),a("borad-item",{attrs:{title:"公司延期"+(0===e.type?"任务":"项目")+"数排名",dataSet:0===e.type?e.sortData.company_dely_task:e.sortData.company_dely_project}})]:e._e()],2)])},M=[],q=a("c206"),H=a.n(q),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"borad-item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.title))]),a("div",{staticClass:"sort-list"},e._l(e.dataSet,(function(t,s){return a("Row",{key:s,staticClass:"item-content"},[a("Col",{attrs:{span:"4"}},[a("div",{staticClass:"serial",style:s<3?{background:"#314659",color:"#fff"}:{}},[e._v(e._s(s+1))])]),a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"label"},[e._v(e._s(t.name))])]),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"count"},[e._v(e._s(e._f("comma")(t.num)))])])],1)})),1)])},A=[],z={props:{title:String,dataSet:{type:Array,default(){return[]}}}},N=z,G=(a("7ae9"),Object(j["a"])(N,E,A,!1,null,"e8a9fc12",null)),V=G.exports,W=a("db49"),B={components:{boradItem:V},data(){const e=H()().subtract(1,"month").format("YYYY-MM-DD HH:mm:ss"),t=H()().format("YYYY-MM-DD HH:mm:ss");return{Config:W["a"],type:0,queryDate:[e,t],dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}}}},asyncMethods:{fetchSortData(){const e={};return e.begin_date=H()(this.queryDate[0]).format("YYYY-MM-DD HH:mm:ss"),e.end_date=H()(this.queryDate[1]).format("YYYY-MM-DD HH:mm:ss"),e.rank_type=this.type,D({...e}).then(e=>e)}},created(){this.fetchSortData()},methods:{}},U=B,J=(a("31b8"),Object(j["a"])(U,Y,M,!1,null,"43dd4771",null)),Z=J.exports,X={components:{stageStatistics:S,userStatistics:L,sortBoard:Z},props:{user:{type:Object,default(){return{}}}},data(){return{Config:W["a"]}},methods:{}},K=X,Q=(a("dca2"),Object(j["a"])(K,o,c,!1,null,"b2bf908a",null)),ee=Q.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"company-view"},[a("div",{staticClass:"company-select"},[a("Form",{ref:"companyForm",attrs:{model:e.companyForm,"label-position":"left","label-width":80}},[a("FormItem",{attrs:{prop:"company",label:"所属公司:"}},[a("auth-view",{attrs:{perm:{domain:"anysis",action:"select-company-result",extra:{}}},scopedSlots:e._u([{key:"forbidden",fn:function(){return[a("Select",{staticStyle:{width:"30%"},attrs:{disabled:""},model:{value:e.companyForm.company,callback:function(t){e.$set(e.companyForm,"company",t)},expression:"companyForm.company"}},[e.fetchCompanies.isResolved?e._l(e.companies,(function(t,s){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})):e._e()],2)]},proxy:!0}])},[a("Select",{staticStyle:{width:"30%"},attrs:{filterable:""},on:{"on-change":e.fetchCompanyData},model:{value:e.companyForm.company,callback:function(t){e.$set(e.companyForm,"company",t)},expression:"companyForm.company"}},[e.fetchCompanies.isResolved?e._l(e.companies,(function(t,s){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})):e._e()],2)],1)],1)],1),a("Row",{staticClass:"part-three",attrs:{gutter:64}},[a("Col",{attrs:{span:"16"}},[a("project-statistics",{staticClass:"dashborad-item",attrs:{companyId:e.companyForm.company}})],1),e.fetchCompanyData.isResolved?a("Col",{attrs:{span:"8"}},[a("member-statistics",{staticClass:"dashborad-item",attrs:{memberData:e.companyData.role_user}})],1):e._e()],1),e.fetchCompanyData.isResolved?a("Row",{staticClass:"part-four",attrs:{gutter:64}},[a("Col",{attrs:{span:"12"}},[a("task-statistics",{staticClass:"dashborad-item",attrs:{taskData:e.companyData.task_num}})],1),a("Col",{attrs:{span:"12"}},[a("delay-risk",{staticClass:"dashborad-item",attrs:{delayData:e.companyData.delay_tasks}})],1)],1):e._e()],1)])},ae=[],se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",{staticClass:"project-statistics"},[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[e._v("新增项目数: "+e._s(e._f("comma")(e.total)))]),a("div",{staticClass:"right"},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":e.setChartData},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("Radio",{attrs:{label:2}},[e._v("全部")]),a("Radio",{attrs:{label:0}},[e._v("内部")]),a("Radio",{attrs:{label:1}},[e._v("外部")])],1),a("DatePicker",{staticStyle:{"margin-left":"24px",width:"200px"},attrs:{type:"datetimerange",clearable:!1,options:e.dataPickerOptions,placement:"bottom-end",placeholder:"选择日期"},on:{"on-change":e.setChartData},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)]),a("div",{ref:"chart",staticClass:"chart"})])],1)},re=[],ne=a("9ac7"),oe={props:["companyId"],data(){const e=H()().subtract(1,"month").format("YYYY-MM-DD HH:mm:ss"),t=H()().format("YYYY-MM-DD HH:mm:ss");return{chart:null,total:0,type:2,queryDate:[e,t],dataPickerOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()}}}},watch:{companyId(){this.setChartData()}},asyncMethods:{fetchChartData(){const e={};return e.begin_date=H()(this.queryDate[0]).format("YYYY-MM-DD HH:mm:ss"),e.end_date=H()(this.queryDate[1]).format("YYYY-MM-DD HH:mm:ss"),e.project_type=this.type,e.company_id=this.companyId,k({...e}).then(e=>e.project_incre)}},mounted(){const e=this.$refs.chart,t=function(){e&&(e.style.width="55vw",e.style.height="35vh")};t(),this.chart=f([ne["a"]]).init(this.$refs.chart),window.addEventListener("resize",this.resizeChart),this.chart.showLoading(),this.setChartData(),this.chart.setOption({tooltip:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"新增项目数",type:"bar",barWidth:"20%",itemStyle:{color:"rgba(24, 144, 255, 1)"},data:[]}]})},destroyed(){window.removeEventListener("resize",this.resizeChart)},methods:{resizeChart(){this.chart.resize()},setChartData(){this.fetchChartData().then(e=>{const t=e.map(e=>({name:e.name,value:e.num})).reverse();this.total=t.reduce((e,t)=>e+t.value,0),this.chart.hideLoading(),this.chart.setOption({xAxis:{data:t.map(e=>e.name)},series:[{data:t.map(e=>e.value)}]})})}}},ce=oe,le=(a("d304"),Object(j["a"])(ce,se,re,!1,null,"1f5113b0",null)),ie=le.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"member-statistics"},[a("div",{staticClass:"title"},[e._v("成员构成")]),e._l(e.memberData,(function(t,s){return a("Row",{key:s,staticClass:"item"},[a("Col",{attrs:{span:"4"}},[a("div",{staticClass:"serial",style:{background:0===s?"rgba(249, 142, 45, 0.85)":"#F0F2F5"}})]),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"label"},[e._v(e._s(t.name))])]),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"count"},[e._v(e._s(e._f("comma")(t.num)))])])],1)}))],2)},pe=[],ue={props:["memberData"]},de=ue,he=(a("79b6"),Object(j["a"])(de,me,pe,!1,null,"1a9d76ed",null)),_e=he.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-statistics"},[a("div",{staticClass:"header"},[e._v("任务数量统计")]),a("div",{staticClass:"content"},e._l(e.taskDataWithClass,(function(t,s){return a("div",{key:s,staticClass:"item",class:[t.class]},[a("div",{staticClass:"number"},[e._v(e._s(t.num))]),a("div",{staticClass:"label"},[e._v(e._s(t.name))])])})),0),a("div",{staticClass:"footer"},[a("div",{staticClass:"total"},[e._v("任务总量："+e._s(e.total))])])])},fe=[],ve={props:{taskData:{type:Object,default(){return{}}}},computed:{taskDataWithClass(){const e=[];return Object.keys(this.taskData).forEach(t=>{const a={name:t,num:this.taskData[t]};switch(t){case"草稿":a.class="grey",e[0]=a;break;case"待接单":a.class="yellow",e[1]=a;break;case"验收中":a.class="green",e[2]=a,a.name="进行中";break;case"标注中":e[2].num+=a.num;break;case"已完成":a.class="orange",e[3]=a;break;case"拒单":a.class="red",a.name="已放弃",e[4]=a;break}}),e},total(){return Object.keys(this.taskData).reduce((e,t)=>e+this.taskData[t],0)}}},ye=ve,Ce=(a("5994"),Object(j["a"])(ye,be,fe,!1,null,"0bb60baf",null)),Pe=Ce.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"delay-risk"},[a("div",{staticClass:"header"},[e._v("任务延期风险")]),a("div",{staticClass:"content"},[a("Table",{attrs:{columns:e.columns,data:e.tableData,height:"330"}}),a("Page",{staticClass:"page",attrs:{"show-total":"","show-elevator":"",current:e.currentPage,"page-size":e.pageSize,total:e.total},on:{"on-change":e.handlePageChange}})],1)])},ge=[],ke={props:["delayData"],data(){return{columns:[{title:"任务名称",key:"task_name",render:(e,t)=>e("router-link",{props:{to:{name:"task2",params:{taskId:t.row.task_id.toString()}}},domProps:{target:"_blank"}},t.row.task_name)},{title:"任务截止时间",key:"end_date"},{title:"已延期",render:(e,t)=>e("div",t.row.delay_days+"天")},{title:"任务负责人",render:(e,t)=>e("div",`${t.row.team_name}(${t.row.pri_person})`)}],currentPage:1,pageSize:10,total:this.delayData.length}},computed:{tableData(){return this.delayData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},methods:{handlePageChange(e){this.currentPage=e}}},we=ke,xe=(a("69d4"),Object(j["a"])(we,De,ge,!1,null,"69a1f9bc",null)),je=xe.exports,Ie=a("22dc"),Se={components:{projectStatistics:ie,memberStatistics:_e,taskStatistics:Pe,delayRisk:je},props:{user:{type:Object,default(){return{}}}},data(){return{companyForm:{company:this.user.company_id.toString()},initCompany:[]}},asyncMethods:{fetchCompanies(){return Object(Ie["k"])({page:{start:0,size:2e3},company_status:2}).then(e=>e.data.map(e=>({id:e.company_id.toString(),name:e.company_name})))},fetchCompanyData(){const e={};return e.company_id=this.companyForm.company,g({...e}).then(e=>e)}},async created(){await this.fetchCompanies(),this.fetchCompanyData()}},Oe=Se,Fe=(a("7cba"),Object(j["a"])(Oe,te,ae,!1,null,"418d3927",null)),Re=Fe.exports,Te=a("f78a"),$e=a("9ce4"),Le={components:{overView:ee,companyView:Re,Deny:Te["default"]},computed:{...Object($e["c"])({user:"user"})}},Ye=Le,Me=(a("2779"),Object(j["a"])(Ye,r,n,!1,null,"38dc5d9b",null));t["default"]=Me.exports},ffee:function(e,t,a){}}]);